<div class="workbench-wrapper">
  <div class="sidebar-panel">
    <div class="sidebar-wrapper">
      <div class="file-list-toolbar-panel" [class.collapsed]="!(showSidebar$ | async)">
        <div class="vertical-icon-nav-item" [class.active]="(sidebarView$ | async)==SidebarView.FILES" (click)="setSidebarView(SidebarView.FILES)">
          <button mat-icon-button aria-label="View File List">
            <mat-icon>description</mat-icon>
          </button>
        </div>
        <div class="vertical-icon-nav-item" [class.active]="(sidebarView$ | async)==SidebarView.SEARCH" (click)="setSidebarView(SidebarView.SEARCH)">
          <button mat-icon-button aria-label="Search File List">
            <mat-icon>search</mat-icon>
          </button>
        </div>

      </div>
      <div *ngIf="(showSidebar$ | async)" class="file-list-panel">
        <div class="file-list-panel-wrapper">
          <div class="file-list-panel-header">
            <div *ngIf="(sidebarView$ | async) == SidebarView.FILES">
              <div class="file-list-header-view">
                <button mat-icon-button aria-label="Clear Library" (click)="removeAllFiles()">
                  <mat-icon>delete_sweep</mat-icon>
                </button>
                <button mat-icon-button aria-label="Refresh" (click)="refresh()">
                  <mat-icon>refresh</mat-icon>
                </button>
              </div>
            </div>

            <div *ngIf="(sidebarView$ | async) == SidebarView.SEARCH">
              <div class="file-list-header-search">
                <mat-form-field class="">
                  <input matInput placeholder="Filter library files" [(ngModel)]="fileFilterString" type="text">
                </mat-form-field>
                <div *ngIf="fileFilterString != ''" class="alert alert-warning mb-0" role="alert">
                  {{( (files$ | async) | filteredFiles: fileFilterString)?.length}} of {{(files$ | async)?.length}} files matched
                </div>
              </div>


            </div>





          </div>
          <div class="file-list-panel-content">
            <div class="file-list-content">
              <ul class="list-unstyled" style="white-space: nowrap; display: inline-block; margin: 0px; min-width: 100%;">
                <div *ngFor="let file of (files$ | async); let index=index; let odd=odd; let even=even;" [ngClass]="{ odd: odd, even: even }">
                  <app-data-file-list-item [file]="file" [selected]="(selectedFile$ | async) == file" (select)="onFileSelect(file)">
                  </app-data-file-list-item>
                </div>

              </ul>
            </div>

          </div>
        </div>
      </div>
    </div>

  </div>
  <span class="resizer"></span>
  <div class="workbench-outlet-panel">

    <router-outlet></router-outlet>
  </div>
  <div class="workbench-nav-panel">
    <nav>
      <div class="vertical-icon-nav-item" routerLinkActive="active">
        <a mat-icon-button aria-label="Viewer" routerLink="viewer" (click)="onClickWorkbenchNav(router.isActive('/workbench/viewer'))">
          <mat-icon>remove_red_eye</mat-icon>
        </a>
      </div>
      <div class="vertical-icon-nav-item" routerLinkActive="active">
        <a mat-icon-button aria-label="Plotter" routerLink="plotter" (click)="onClickWorkbenchNav(router.isActive('/workbench/plotter'))">
          <mat-icon>insert_chart</mat-icon>
        </a>
      </div>
      <div class="vertical-icon-nav-item" routerLinkActive="active">
        <a mat-icon-button aria-label="Sonifier" routerLink="sonifier" (click)="onClickWorkbenchNav(router.isActive('/workbench/sonifier'))">
          <mat-icon>audiotrack</mat-icon>
        </a>
      </div>
      <div class="vertical-icon-nav-item" routerLinkActive="active">
        <a mat-icon-button aria-label="Source Analyzer" routerLink="source-analyzer" (click)="onClickWorkbenchNav(router.isActive('/workbench/source-analyzer'))">
          <mat-icon>star_rate</mat-icon>
        </a>
      </div>
    </nav>

  </div>
</div>