<div id="image-viewer-wrapper">
  <div id="titlebar">
    <h6 class="p-2">{{imageFile?.name}}</h6>
  </div>
  <div id="toolbar">
    <button mat-icon-button aria-label="Zoom In" (click)="zoomIn()"><mat-icon>zoom_in</mat-icon></button>
    <button mat-icon-button aria-label="Zoom Out" (click)="zoomOut()"><mat-icon>zoom_out</mat-icon></button>
    <button mat-icon-button aria-label="Zoom to Fit" (click)="zoomToFit()"><mat-icon>zoom_out_map</mat-icon></button>
    <!-- <button mat-icon-button aria-label="Download Viewer Snapshot" (click)="downloadSnapshot()"><mat-icon>photo_camera</mat-icon></button> -->
    <button mat-icon-button aria-label="Remove From Library" (click)="removeFromLibrary()"><mat-icon>delete</mat-icon></button>
  </div>
  <div id="viewer">
    
    <div #viewerPlaceholder style="width: 100%; height: 100%;" (click)="onViewportClick($event)" (mousemove)="onViewportMove($event)">
      <div id="svg-placeholder">
        <svg
          [attr.width]="placeholder ? placeholder.clientWidth : 0"
          [attr.height]="placeholder ? placeholder.clientHeight : 0">
          <g #svgGroup>
            <g *ngIf="showRegionMarker && region"
              app-svg-rectangle-marker
              class="region-marker"
              [x]="region.x"
              [y]="region.y"
              [width]="region.width"
              [height]="region.height">
            </g>

            <g *ngIf="showSourceMarkers">
              <g *ngFor="let source of sources">
                <g
                  app-svg-circle-marker
                  class="source-marker"
                  [x]="source.x"
                  [y]="source.y"
                  [radius]="10"
                  [selected]="selectedSources.indexOf(source) != -1"
                  (click)="onSourceClick($event, source)">
                </g>
              </g>
            </g>

            <g *ngIf="showLineMarker && line"
              app-svg-line-marker
              class="line-marker"
              [x1]="line.x1"
              [y1]="line.y1"
              [x2]="line.x2"
              [y2]="line.y2">
            </g>

            
            <!-- <g *ngIf="showCustomMarkers">
              <g *ngFor="let markerId of imageFile?.markerIds">
                <g [ngSwitch]="imageFile.markerEntities[markerId].type">
                  <g *ngSwitchCase="MarkerType.RECTANGLE"
                    app-svg-rectangle-marker
                    class="custom-marker"
                    [x]="imageFile.markerEntities[markerId].x"
                    [y]="imageFile.markerEntities[markerId].y"
                    [width]="imageFile.markerEntities[markerId].width"
                    [height]="imageFile.markerEntities[markerId].height"
                    [selected]="imageFile.markerEntities[markerId].selected">
                  </g>
                </g>
              </g>
            </g> -->
          </g>
         
          
        </svg>
      </div>
    </div>
    
    
    <div *ngIf="showInfoBar && (mouseInfo$ | async)" id="info-bar">
      <span>
        ({{(mouseInfo$ | async).x | number : '1.1-3'}}, {{(mouseInfo$ | async).y  | number : '1.1-3'}}) : {{(mouseInfo$ | async).value  | number : '1.1-3'}}
      </span>
      <span class="float-right" *ngIf="(mouseInfo$ | async).raHours != null && (mouseInfo$ | async).decDegs != null">
        RA: {{(mouseInfo$ | async).raHours | dms:'2.4-4'}} Dec: {{(mouseInfo$ | async).decDegs  | dms:'2.3-3'}}
      </span>
    </div>
  </div>
</div>