<ng-container *ngIf="!(loading$ | async); else loading">
    <ng-container *ngIf="(jobs$ | async) as jobs">
        <ng-container *ngIf="jobs.length != 0; else noItems">

            <mat-table matSort #table [dataSource]="jobs">


                <!-- ID Column -->
                <ng-container matColumnDef="id">
                    <mat-header-cell *matHeaderCellDef>ID</mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{ row.id }}</mat-cell>
                </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="type">
                    <mat-header-cell *matHeaderCellDef>Type</mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        {{row.type}}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="state">
                    <mat-header-cell *matHeaderCellDef>State</mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        <ng-container *ngIf="row.state.status == 'in_progress'; else stateBlock">
                            <div style="padding: 5px; width: 100px">
                                <!-- <mat-progress-bar mode="determinate" mode="determinate" [value]="row.state?.progress"></mat-progress-bar>
                                </mat-progress-bar> -->
                            </div>
                        </ng-container>
                        <ng-template #stateBlock>
                            <span class="notification" [class.is-success]="row.state.status -- 'completed'"
                                [class.is-warning]="row.state.status -- 'canceled'">{{
                                row.state?.status?.toLowerCase() }}</span>
                        </ng-template>
                    </mat-cell>
                </ng-container>



                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row [class.selected]="row.id == selectedJobId" *matRowDef="let row; columns: displayedColumns"
                    (click)="onRowClick($event, row)" (mouseenter)="hoveredRow=row;" (mouseleave)="hoveredRow=null;">
                </mat-row>
            </mat-table>

        </ng-container>

    </ng-container>
</ng-container>

<!-- Loading template -->
<ng-template #loading>
    <div class="flex flex-auto flex-col items-center justify-center bg-gray-100 dark:bg-transparent">
        <img class="w-28 m-10" src="assets/images/logo/logo.svg" alt="Skynet logo" />
        <!-- <mat-icon class="icon-size-24" [svgIcon]="'iconsmind:file_hide'"></mat-icon> -->
        <mat-progress-bar class="w-96" mode="indeterminate"></mat-progress-bar>
    </div>
</ng-template>

<!-- No items template -->
<ng-template #noItems>
    <div class="flex flex-auto flex-col items-center justify-center bg-gray-100 dark:bg-transparent">
        <!-- <mat-icon class="icon-size-24" [svgIcon]="'iconsmind:file_hide'"></mat-icon> -->
        <div class="mt-4 text-2xl font-semibold tracking-tight text-secondary">No jobs were
            found!</div>
    </div>
</ng-template>